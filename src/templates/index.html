{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5QTWVG5K');</script>
        <!-- End Google Tag Manager -->
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            {% block title %}
            {% endblock title %}
        | Delphi</title>
        <meta content="" name="description" />
        <meta content="" name="keywords" />
        <!-- Favicons -->
        <link href="{% static 'img/DELPHI-favicon.svg' %}" rel="icon" />
        <link href="{% static 'img/apple-touch-icon.png' %}" rel="apple-touch-icon" />
        <!-- Font Awesome -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
              rel="stylesheet" />
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
              rel="stylesheet" />
        <!-- MDB -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.2/mdb.min.css"
              rel="stylesheet" />
        <!-- Select2 css -->
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
              rel="stylesheet" />
        <!-- Data Table -->
        <link rel="stylesheet"
              href="https://cdn.datatables.net/v/dt/dt-2.1.8/b-3.2.0/b-colvis-3.2.0/cr-2.0.4/fc-5.0.4/fh-4.0.1/kt-2.12.1/r-3.0.3/rg-1.5.1/rr-1.5.0/sc-2.4.3/sp-2.3.3/sl-2.1.0/datatables.min.css" />
        <link rel="stylesheet"
              href="https://cdn.datatables.net/plug-ins/1.10.13/features/mark.js/datatables.mark.min.css" />

        <link rel="stylesheet" href="{% static 'css/style.css' %}" />
        <link rel="stylesheet" href="{% static 'css/custom_styles.css' %}" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src=" https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js "></script>
        <style>
            body {
                overflow: hidden; /* Prevent body scroll, let flex container handle it */
            }
        </style>
    </head>
    <body>
        <!-- Google Tag Manager (noscript) -->
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QTWVG5K"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->

        <div class="d-flex w-100 vh-100">
            <!-- Sidebar (Blue Band) -->
            <div class="d-flex flex-column align-items-center justify-content-center py-3" style="width: 50px; min-width: 50px; background-color: #012970; z-index: 1040;">
                <!-- Filter Toggle Button (Global) -->
                <button class="btn btn-link text-white p-2" id="global-filter-toggle" title="Toggle Filters">
                    <i class="fas fa-filter fa-lg"></i>
                </button>
            </div>

            <!-- Main Content Area -->
            <div class="flex-grow-1 d-flex flex-column h-100" style="overflow: hidden; background-color: #f6f9ff;">
                <!-- Top Header for Title -->
                <div class="bg-white border-bottom px-4 py-3 d-flex align-items-center shadow-sm" style="flex-shrink: 0; min-height: 74px;">
                    <img src="{% static 'img/CMU-wordmark.svg' %}" alt="Carnegie Mellon University" height="40" class="me-3">
                    <span style="font-size: 1.25rem; font-weight: 600; color: #012970;">Delphi EpiPortal : One Stop Shop for Real Time Infectious Disease Indicators</span>
                </div>

                <!-- Page Content -->
                <div class="flex-grow-1" style="overflow-y: auto; position: relative;">
                    <div class="container-fluid p-3 h-100">
                        {% block content %}
                        {% endblock content %}
                    </div>
                </div>
            </div>
        </div>

        <!-- MDB -->
        <script type="text/javascript"
                src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.2/mdb.umd.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
        <script>
            window.addEventListener('pageshow', (event) => {
                if (event.persisted) {
                  location.reload()
                }
              });
        </script>
    </body>
</html>